#!/bin/bash

set -ex

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  radicale \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  homepage-rb/overlays/prod \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  homepage/overlays/prod \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  grafana \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  monitoring \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  influxdb \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  diun \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  longhorn \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  seaweedfs \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  traefik \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  qbt \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  hass \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  cert-manager \
| kubectl apply -f -

kustomize build \
  --enable-alpha-plugins \
  --enable-exec \
  calibre-web \
| kubectl apply -f -
